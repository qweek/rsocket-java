language: java

jdk:
  - oraclejdk8

env:
  - TRAVIS_PULL_REQUEST=true
  - CODECOV_TOKEN=84833afd-2ab1-4c0c-98c9-6cc3a2015bef

branches:
  only:
    - feature/ci
    - feature/coverage

build:
  ci:
    - gradle assemble
    - gradle check
    - mkdir -p shippable/codecoverage
    - gradle jacocoRootReport
    - cp -r build shippable/codecoverage
    - bash <(curl -s https://codecov.io/bash)